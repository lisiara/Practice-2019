@using BikersBlog.Models
@model BikersBlog.Models.Driver

@{
    ViewBag.Title = "List";
}

<h2>List</h2>

@foreach (var driver in ViewBag.Drivers)
{
    @DriverHelper(driver)

}



<h2>Добавление нового водителя</h2>

@using (Html.BeginForm("Create", "Drivers", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

    @Html.LabelFor(model => model.Name)

    @Html.EditorFor(model => model.Name)
    @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })


    <br>
    @Html.LabelFor(model => model.Lastname)

    @Html.EditorFor(model => model.Lastname)
    @Html.ValidationMessageFor(model => model.Lastname, "", new { @class = "text-danger" })

    <br>
    @Html.LabelFor(model => model.Age)

    @Html.EditorFor(model => model.Age)
    @Html.ValidationMessageFor(model => model.Age, "", new { @class = "text-danger" })
    <br>

    <input class="btn btn-block" type="submit" value="сохранить" />
}



@helper DriverHelper(Driver driver)
{
    <div>
        <div>
            @driver.Id
        </div>
        <div>
            @driver.Name

        </div>
        <div>
            @driver.Lastname
        </div>
        <div>
            @driver.Age
        </div>
        <div>
            @if (driver.Car != null)
            {
            Машина:
                <div>@driver.Car.Modelname</div>
                <div>@driver.Car.Maxspeed</div>
            }
            else
            {
                <h3>Нет машины</h3>
            }
        </div>
        <hr>
        <div>
            @Html.ActionLink("Посмотреть", "DriverView", "Drivers", new { id = driver.Id }, null)
        </div>
        <div>
            @Html.ActionLink("Редактировать", "DriverEd", "Drivers", new { id = driver.Id }, null)
        </div>
        <hr>
    </div>

}


